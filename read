import subprocess
import re

def read_bridge_control(bus):
    try:
        setpci_output = subprocess.check_output(["setpci", "-s", bus, "0x3e.l"])
        bridge_control_value = re.search(r"0x([0-9a-fA-F]+)", setpci_output.decode("utf-8"))
        if bridge_control_value:
            print(f"Bridge Control for {bus}: 0x{bridge_control_value.group(1)}")
        else:
            print(f"No Bridge Control information found for {bus}.")
    except subprocess.CalledProcessError:
        print(f"Error reading device {bus} using setpci.")

if __name__ == "__main__":
    specific_bus = "17:00.0"
    read_bridge_control(specific_bus)
